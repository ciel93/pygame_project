# Python Pygame Shooting Game

これは、Pygameライブラリを使用して作成された、弾幕シューティングゲームのプロジェクトです。
多彩な敵、複雑な弾幕パターンを持つボス、パワーアップシステム、そしてパフォーマンスを最適化するための高度な技術（オブジェクトプーリング、Quadtree）が実装されています。

## ✨ 主な機能

### ゲームプレイ
- **自機操作**: 通常速度と、キー入力による低速移動が可能です。
- **パワーアップシステム**: アイテムを取得することで自機のショットが最大7段階まで強化されます。
- **ホーミング弾**: パワーレベルが一定以上に達すると、敵を自動追尾するホーミング弾が追加で発射されます。
- **ボムシステム**: パワーを消費して、広範囲の敵と敵弾を一掃する強力なボム（マスタースパーク風レーザー）を発動できます。
- **多彩な敵キャラクター**: 直進するだけの敵から、プレイヤーを追尾したり、特殊な弾幕を展開したりする敵まで、様々な種類のザコ敵が出現します。
- **複数ステージ構成**: `stage_manager.py`により、ステージごとに異なる敵の出現パターンが管理されています。
- **個性的なボス戦**: 各ステージの最後には、複数の攻撃パターンを持つボスが登場します。ボスのHPが減少すると、より激しい「発狂モード」に移行します。
- **サウンドエフェクト**: 自機や敵の発射音、爆発音、ボムの発動音などが実装されており、臨場感を高めます。

### 技術的な特徴
- **オブジェクトプーリング**: 弾を毎回生成・破棄するのではなく、オブジェクトプールから再利用することで、処理負荷を大幅に軽減しています。
- **Quadtreeによる衝突判定**: 画面上のオブジェクトを木構造で効率的に管理し、膨大な数の弾とキャラクター間の衝突判定を高速化しています。
- **モジュール化された設計**: プレイヤー、敵、弾、アイテム、ステージ管理などがそれぞれ独立したファイルに分割されており、高い保守性と拡張性を持ちます。
- **デバッグ機能**: 当たり判定やQuadtreeの範囲を視覚化する機能が搭載されており、開発や調整が容易です。

## 🎮 操作方法

| キー | アクション |
| :--- | :--- |
| **矢印キー** | 自機の移動 |
| **Zキー** | ショットの発射 |
| **Xキー** | ボムの発動（パワー100消費） |
| **Shiftキー** | 低速移動（精密な操作用） |
| **Pキー** | ゲームの一時停止 |
| **ESCキー** | ゲームの終了 |

### デバッグ用キー
| キー | アクション |
| :--- | :--- |
| **Hキー** | 自機の当たり判定の表示/非表示 |
| **Jキー** | 敵弾の当たり判定の表示/非表示 |
| **Qキー** | Quadtreeの範囲の表示/非表示 |
| **Oキー** | オブジェクトプールのデバッグ情報の表示/非表示 |

## 🔧 実行環境

このプロジェクトを実行するには、PythonとPygameライブラリが必要です。

1.  **Pythonのインストール**:
    Python公式サイトから最新版をインストールしてください。

2.  **Pygameのインストール**:
    ターミナルまたはコマンドプロンプトで以下のコマンドを実行します。
    ```bash
    pip install pygame
    ```

3.  **ゲームの実行**:
    プロジェクトのルートディレクトリで、以下のコマンドを実行します。
    ```bash
    python main.py
    ```

## 📂 プロジェクト構成

pygame_project/ │ ├── main.py # ゲームのメインループとエントリーポイント ├── game.py # ゲーム全体の管理クラス (Game) ├── setting.py # 画面サイズや色などの定数設定 │ ├── player.py # 自機クラス (Player) ├── enemy.py # 敵の基底クラス (Enemy) ├── enemy_subclasses.py # ザコ敵の派生クラス群 ├── boss.py # ボスの基底クラス (BossEnemy) ├── boss_subclasses.py # 各ステージのボス派生クラス群 │ ├── bullet.py # 自機弾クラス (Bullet, HomingBullet) ├── enemy_bullet.py # 敵弾クラス (EnemyBullet) ├── bomb.py # ボム（MasterSpark）クラス ├── item.py # アイテムクラス (Item) ├── explosion.py # 爆発エフェクトクラス (Explosion) │ ├── stage_manager.py # ステージ進行と敵の出現管理 ├── pooling.py # 弾のオブジェクトプールクラス (BulletPool) ├── quadtree.py # 衝突判定用のQuadtreeクラス ├── support.py # テキスト描画などのヘルパー関数 │ └── assets/ # 画像や音声ファイル ├── img/ └── sound/

